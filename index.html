<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Trade Platform</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background-color: #0A0A0A;
      color: #FFFFFF;
      line-height: 1.5;
    }
    .section {
      padding: 80px 20px;
      text-align: center;
    }
    .hero {
      padding: 120px 20px;
      background-color: #0D0D0D;
    }
    /* Hero layout */
    .hero-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      flex-wrap: wrap;
    }
    .hero-content {
      flex: 1;
      max-width: 600px;
      text-align: left;
      padding: 20px;
    }
    .hero-image {
      flex: 1;
      max-width: 500px;
      padding: 20px;
    }
    .hero-image img {
      width: 100%;
      border-radius: 20px;
    }
    @media (max-width: 900px) {
      .hero-container {
        flex-direction: column;
        text-align: center;
      }
      .hero-content, .hero-image {
        max-width: 100%;
        text-align: center;
        padding: 10px 0;
      }
    }
    .hero h1 {
      font-size: 3rem;
      margin-bottom: 20px;
    }
    .hero p {
      font-size: 1.2rem;
      max-width: 650px;
      margin: 0 auto 40px;
      color: #AAAAAA;
    }
    a.button {
      display: inline-block;
      padding: 15px 30px;
      border: 2px solid #00FFC6;
      border-radius: 25px;
      color: #00FFC6;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    a.button:hover {
      background: #00FFC6;
      color: #0A0A0A;
    }

    .cards-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      margin-top: 40px;
    }
    .card {
      width: 300px;
      padding: 20px;
      border: 2px solid #00FFC6;
      border-radius: 20px;
      background-color: #0D0D0D;
      text-align: left;
      position: relative;
      color: #FFFFFF;
    }
    .card h2 {
      margin-bottom: 10px;
      font-size: 1.6rem;
      color: #00FFC6;
    }
    .card .percentage {
      font-size: 2rem;
      font-weight: bold;
      color: #00FFC6;
      margin-bottom: 10px;
    }
    .card p {
      color: #AAAAAA;
      font-size: 0.95rem;
      margin-bottom: 20px;
    }
    .card .chart {
      width: 100%;
      height: 100px;
      background: linear-gradient(90deg, transparent, #00FFC6);
      border-radius: 10px;
      margin-bottom: 10px;
      position: relative;
    }

    .learn-section {
      background-color: #0D0D0D;
    }
    .learn-section h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    .learn-section p {
      font-size: 1.1rem;
      color: #AAAAAA;
      max-width: 700px;
      margin: 0 auto 40px;
    }
    .learn-card {
      width: 280px;
      padding: 20px;
      border: 2px solid #00FFC6;
      border-radius: 20px;
      background-color: #0D0D0D;
      color: #FFFFFF;
      text-align: left;
    }
    .learn-card h3 {
      margin-bottom: 8px;
      font-size: 1.4rem;
      color: #00FFC6;
    }
    .learn-card h4 {
      margin-bottom: 12px;
      font-size: 1rem;
      color: #00FFC6;
      opacity: 0.8;
    }
    .learn-card p {
      color: #AAAAAA;
      font-size: 0.9rem;
    }
    /* Why Section */
    .why-section {
      background-color: #0A0A0A;
    }
    .why-section h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #00FFC6;
    }
    .why-section p {
      font-size: 1.1rem;
      color: #AAAAAA;
      max-width: 700px;
      margin: 0 auto 40px;
    }
    .feature-card {
      width: 280px;
      padding: 20px;
      border: 2px solid #00FFC6;
      border-radius: 20px;
      background-color: #0D0D0D;
      text-align: left;
      color: #FFFFFF;
    }
    .feature-card h3 {
      margin-bottom: 8px;
      font-size: 1.4rem;
      color: #00FFC6;
    }
    .feature-card p {
      color: #AAAAAA;
      font-size: 0.9rem;
    }
    /* CTA Section */
    .cta-section {
      background-color: #0D0D0D;
    }
    .cta-section h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    .cta-section p {
      font-size: 1.1rem;
      color: #AAAAAA;
      max-width: 700px;
      margin: 0 auto 40px;
    }
    /* Footer */
    .footer {
      background-color: #0D0D0D;
      font-size: 0.8rem;
      color: #666666;
    }

    /* Navigation Bar */
    .nav-bar {
      background-color: #0D0D0D;
      padding: 20px 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 24px;
      flex-wrap: wrap;
    }
    .nav-container nav {
      display: flex;
      align-items: center;
      gap: 18px;
      flex-wrap: wrap;
    }
    .nav-container nav a {
      color: #00FFC6;
      text-decoration: none;
      font-size: 1rem;
    }
    .nav-container nav a:hover {
      text-decoration: underline;
    }
    .nav-container a.logo {
      margin-left: 0;
      color: #00FFC6;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .nav-container .button {
      padding: 12px 24px;
      border: 2px solid #00FFC6;
      border-radius: 24px;
    }
    @media (max-width: 900px) {
      .cards-container {
        flex-direction: column;
        align-items: center;
      }
      .card, .learn-card {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <header class="nav-bar">
    <div class="nav-container">
      <a href="index.html" class="logo">AI Trade Edge</a>
      <nav>
        <a href="#picks">AI Picks</a>
        <a href="#paths">Trader Paths</a>
        <a href="#learn">Learn</a>
        <a href="tradebot.html">TradeBot</a>
        <a href="survey.html">Survey</a>
        <a href="faq.html">FAQs</a>
        <a href="login.html" class="button">Login</a>
      </nav>
    </div>
  </header>
  <!-- Hero Section -->
  <section class="hero section">
    <div class="hero-container">
      <div class="hero-content">
        <h1>Unlock Your Trading Edge with AI</h1>
        <p>Discover intelligent signals, tailored education, and proven strategies that help you trade smarter—no more guesswork.</p>
        <a href="survey.html" class="button">Find Your Trader Path</a>
      </div>
      <div class="hero-image">
        <img src="hero-chart.png" alt="Stock market chart illustration">
      </div>
    </div>
  </section>

  <!-- Trader Path Section -->
  <section class="section cta-section" id="paths">
    <h2>Choose Your Trader Path</h2>
    <p>Start with the experience that matches your skill level. Each path bundles AI trade signals, focused learning tracks, and a direct line to TradeBot support.</p>
    <div class="cards-container">
      <div class="card">
        <h2>Beginner Trader</h2>
        <p>Build core confidence with simplified signals, foundational lessons, and TradeBot tips for first-time traders.</p>
        <a class="button" href="beginner.html">Enter Beginner Dashboard</a>
      </div>
      <div class="card">
        <h2>Intermediate Trader</h2>
        <p>Level up with momentum ideas, tactical education modules, and rapid TradeBot prompts for fast decision-making.</p>
        <a class="button" href="intermediate.html">Open Intermediate Dashboard</a>
      </div>
      <div class="card">
        <h2>Advanced Trader</h2>
        <p>Explore complex, multi-factor trade setups, macro briefings, and expert TradeBot scenarios tailored to veterans.</p>
        <a class="button" href="advanced.html">Visit Advanced Dashboard</a>
      </div>
      <div class="card">
        <h2>Meet TradeBot</h2>
        <p>Ask navigation questions, get instant market context, or request curated resources across the entire platform.</p>
        <a class="button" href="tradebot.html">Chat with TradeBot</a>
      </div>
    </div>
  </section>

  <!-- Today's AI Picks Section -->
  <section class="section" id="picks">
    <h2>Today's AI Picks</h2>
    <p>Get daily insights on high-probability setups.</p>
    <div class="cards-container" id="picks-container">
      <div class="card" id="picks-loading-card">
        <h2>Loading signals…</h2>
        <p>Please wait while we pull the latest multi-factor data.</p>
      </div>
    </div>
  </section>

  <!-- Live Market Data Section -->
  <section class="section live-data-section">
    <h2>Live Market Data</h2>
    <p>Track real‑time charts of popular stocks and indices.</p>
    <!-- TradingView Market Overview widget -->
    <div class="tradingview-widget-container" style="max-width: 100%; margin: 0 auto;">
      <div id="tradingview_market"></div>
      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
      {
        "colorTheme": "dark",
        "dateRange": "3M",
        "showChart": true,
        "locale": "en",
        "width": "100%",
        "height": "500",
        "largeChartUrl": "",
        "isTransparent": false,
        "showVolume": false,
        "plotLineColorGrowing": "rgba(0, 255, 198, 1)",
        "plotLineColorFalling": "rgba(255, 77, 77, 1)",
        "scaleFontColor": "rgba(170, 170, 170, 1)",
        "gridLineColor": "rgba(42, 46, 57, 0)",
        "symbolActiveColor": "rgba(0, 255, 198, 0.5)",
        "list": [
          {
            "title": "Indices",
            "symbols": [
              {"s": "SP:SPX", "d": "S&P 500"},
              {"s": "NASDAQ:NDX", "d": "NASDAQ 100"}
            ]
          },
          {
            "title": "Stocks",
            "symbols": [
              {"s": "NASDAQ:NVDA", "d": "NVIDIA"},
              {"s": "NASDAQ:TSLA", "d": "Tesla"},
              {"s": "NYSE:SPY", "d": "SPDR S&P 500 ETF"}
            ]
          }
        ]
      }
      </script>
    </div>
  </section>

  <!-- Learn Center Section -->
  <section id="learn" class="section learn-section">
    <h2>Learn the Market</h2>
    <p>Short, visual lessons that explain fundamentals, technicals, and options trading—so you know why a move happens before you take it.</p>
    <div class="cards-container">
      <!-- Fundamentals Card -->
      <a href="fundamentals.html" class="learn-card-link" style="text-decoration: none;">
        <div class="learn-card">
          <h3>Fundamentals 101</h3>
          <h4>How businesses create value</h4>
          <p>Learn how earnings, cash flow, and catalysts drive long-term growth.</p>
        </div>
      </a>
      <!-- Technicals Card -->
      <a href="technicals.html" class="learn-card-link" style="text-decoration: none;">
        <div class="learn-card">
          <h3>Technical Analysis</h3>
          <h4>Charts made simple</h4>
          <p>Understand trends, breakouts, and momentum—no confusing jargon.</p>
        </div>
      </a>
      <!-- Options Card -->
      <a href="options.html" class="learn-card-link" style="text-decoration: none;">
        <div class="learn-card">
          <h3>Options Basics</h3>
          <h4>Leverage without gambling</h4>
          <p>See how calls, puts, and volatility shape opportunity and risk.</p>
        </div>
      </a>
      <!-- FAQ Card -->
      <a href="faq.html" class="learn-card-link" style="text-decoration: none;">
        <div class="learn-card">
          <h3>FAQs</h3>
          <h4>Your questions answered</h4>
          <p>Find answers to common questions about the platform, signals, and trading education.</p>
        </div>
      </a>
    </div>
    <div style="margin-top: 50px;">
    <a href="signup.html" class="button">Start Learning</a>
    </div>
  </section>

  <!-- Why AI Trade Edge Section -->
  <section class="section why-section">
    <h2>Why AI Trade Edge?</h2>
    <p>Experience the difference of real-time AI signals, personalized education, and actionable insights—all designed to help you trade smarter and grow faster.</p>
    <div class="cards-container">
      <div class="feature-card">
        <h3>Real-Time AI Signals</h3>
        <p>Our algorithms scan the markets around the clock to uncover high-probability opportunities before the crowd.</p>
      </div>
      <div class="feature-card">
        <h3>Personalized Learning</h3>
        <p>Get custom lessons and dashboards tailored to your experience level, goals, and risk appetite.</p>
      </div>
      <div class="feature-card">
        <h3>Actionable Insights</h3>
        <p>We provide clear explanations and next steps so you can act with confidence and improve continually.</p>
      </div>
    </div>
  </section>

  <!-- Call-To-Action Section -->
  <section class="section cta-section">
    <h2>Ready to Elevate Your Trading?</h2>
    <p>Join AI Trade Edge today and unlock your personalized trading journey.</p>
    <a href="signup.html" class="button">Get Started Free</a>
  </section>

  <!-- Footer -->
  <footer class="footer section">
    <p>&copy; 2025 AI Trade Platform. All rights reserved.</p>
  </footer>

  <script>
    const smoothScrollLinks = document.querySelectorAll('a[href^="#"]');
    smoothScrollLinks.forEach((link) => {
      link.addEventListener('click', function handleSmoothScroll(event) {
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          event.preventDefault();
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    const picksContainer = document.getElementById('picks-container');
    const REFRESH_MS = Number(document.body.dataset.refreshMs) || 300000;
    const WATCHLIST = (document.body.dataset.watchlist || 'SPY,QQQ,AAPL,MSFT,NVDA')
      .split(',')
      .map((symbol) => symbol.trim().toUpperCase())
      .filter(Boolean);

    function clamp(value, min = -1, max = 1) {
      return Math.max(min, Math.min(max, value));
    }

    function signalToEmoji(signal) {
      if (signal == null || Number.isNaN(signal)) {
        return '•';
      }
      if (signal > 0.35) return '📈';
      if (signal < -0.35) return '📉';
      return '➖';
    }

    function formatScore(score) {
      const bounded = Math.max(-1, Math.min(1, score ?? 0));
      return Math.round(((bounded + 1) / 2) * 100);
    }

    function renderPicks(picks) {
      if (!picksContainer) {
        return;
      }
      picksContainer.innerHTML = '';
      if (!picks || picks.length === 0) {
        const empty = document.createElement('div');
        empty.className = 'card';
        empty.innerHTML = '<h2>No signals</h2><p>We could not compute any picks right now. Please try again later.</p>';
        picksContainer.appendChild(empty);
        return;
      }

      picks.forEach((pick) => {
        const card = document.createElement('div');
        card.className = 'card';

        const score = formatScore(pick.score);
        const price = pick.latestPrice != null ? `$${pick.latestPrice.toFixed(2)}` : 'n/a';

        const indicatorList = document.createElement('ul');
        indicatorList.style.listStyle = 'none';
        indicatorList.style.padding = '0';
        indicatorList.style.margin = '15px 0 0 0';

        (pick.details || []).forEach((detail) => {
          const item = document.createElement('li');
          item.style.marginBottom = '6px';
          item.textContent = `${signalToEmoji(detail.signal)} ${detail.name}: ${detail.value}`;
          indicatorList.appendChild(item);
        });

        card.innerHTML = `
          <h2>${pick.symbol}</h2>
          <div class="percentage">${score}%</div>
          <p>${pick.explanation}</p>
          <p style="color: #666; margin-top: -10px;">Last price: ${price}</p>
        `;
        card.appendChild(indicatorList);

        picksContainer.appendChild(card);
      });
    }

    function buildExplanation(signals) {
      const highlights = [];

      if (signals.momentum > 0.25) {
        highlights.push('Momentum is strong today with buyers in control.');
      } else if (signals.momentum < -0.25) {
        highlights.push('Downside pressure is dominating today.');
      }

      if (signals.trend > 0.2) {
        highlights.push('Intermediate trend is bullish with price holding above the 200-day average.');
      } else if (signals.trend < -0.2) {
        highlights.push('Price remains below its long-term average—trend confirmation is weak.');
      }

      if (signals.range > 0.25) {
        highlights.push('Price is trading near the top of its 52-week range.');
      } else if (signals.range < -0.25) {
        highlights.push('Price is hovering near the bottom of its 52-week range.');
      }

      if (signals.volume > 0.25) {
        highlights.push('Volume is running hot relative to the 3-month average.');
      } else if (signals.volume < -0.25) {
        highlights.push('Participation is light versus typical volume.');
      }

      if (highlights.length === 0) {
        return 'Signals are balanced right now. Monitor for a decisive move before acting.';
      }

      return highlights.join(' ');
    }

    function computePick(quote) {
      const price = Number(quote.regularMarketPrice);
      const changePercent = Number(quote.regularMarketChangePercent);
      const fifty = Number(quote.fiftyDayAverage);
      const twoHundred = Number(quote.twoHundredDayAverage);
      const volume = Number(quote.regularMarketVolume);
      const avgVolume = Number(quote.averageDailyVolume3Month);
      const high52 = Number(quote.fiftyTwoWeekHigh);
      const low52 = Number(quote.fiftyTwoWeekLow);

      const momentum = Number.isFinite(changePercent) ? clamp(changePercent / 10) : null;
      const trend = Number.isFinite(fifty) && Number.isFinite(twoHundred) && twoHundred !== 0
        ? clamp((fifty - twoHundred) / Math.abs(twoHundred))
        : null;
      const range = Number.isFinite(price) && Number.isFinite(high52) && Number.isFinite(low52) && high52 !== low52
        ? clamp(((price - low52) / (high52 - low52) - 0.5) * 2)
        : null;
      const volumeSignal = Number.isFinite(volume) && Number.isFinite(avgVolume) && avgVolume !== 0
        ? clamp((volume - avgVolume) / avgVolume)
        : null;

      const availableSignals = [momentum, trend, range, volumeSignal].filter((value) => value != null);
      const score = availableSignals.length > 0
        ? availableSignals.reduce((sum, value) => sum + value, 0) / availableSignals.length
        : 0;

      const signals = {
        momentum: momentum ?? 0,
        trend: trend ?? 0,
        range: range ?? 0,
        volume: volumeSignal ?? 0,
      };

      const details = [];
      if (Number.isFinite(changePercent)) {
        details.push({
          name: 'Price Change',
          value: `${changePercent.toFixed(2)}%`,
          signal: momentum,
        });
      }
      if (Number.isFinite(fifty) && Number.isFinite(twoHundred)) {
        const diffPercent = ((fifty - twoHundred) / Math.abs(twoHundred)) * 100;
        details.push({
          name: '50d vs 200d',
          value: `${diffPercent.toFixed(2)}%`,
          signal: trend,
        });
      }
      if (Number.isFinite(low52) && Number.isFinite(high52) && Number.isFinite(price)) {
        const position = ((price - low52) / (high52 - low52)) * 100;
        details.push({
          name: '52w Position',
          value: `${position.toFixed(1)}% of range`,
          signal: range,
        });
      }
      if (Number.isFinite(volume) && Number.isFinite(avgVolume)) {
        const relVolume = avgVolume ? ((volume - avgVolume) / avgVolume) * 100 : 0;
        details.push({
          name: 'Volume vs Avg',
          value: `${relVolume.toFixed(1)}%`,
          signal: volumeSignal,
        });
      }

      return {
        symbol: quote.symbol,
        score,
        latestPrice: Number.isFinite(price) ? price : null,
        explanation: buildExplanation(signals),
        details,
      };
    }

    async function loadLivePicks(symbols) {
      if (!symbols.length) {
        return [];
      }

      const url = new URL('https://query1.finance.yahoo.com/v7/finance/quote');
      url.searchParams.set('symbols', symbols.join(','));

      const response = await fetch(url.toString());
      if (!response.ok) {
        throw new Error(`Quote request failed: ${response.status}`);
      }

      const payload = await response.json();
      const results = payload?.quoteResponse?.result ?? [];

      return results
        .map(computePick)
        .filter((pick) => pick && Number.isFinite(pick.score))
        .sort((a, b) => b.score - a.score);
    }

    async function refreshPicks() {
      if (!picksContainer) {
        return;
      }
      try {
        const picks = await loadLivePicks(WATCHLIST);
        renderPicks(picks);
      } catch (error) {
        console.error('Failed to load picks', error);
        picksContainer.innerHTML = '';
        const errorCard = document.createElement('div');
        errorCard.className = 'card';
        errorCard.innerHTML = '<h2>Signal error</h2><p>We could not reach the AI signal service. Refresh to try again.</p>';
        picksContainer.appendChild(errorCard);
      }
    }

    refreshPicks();
    setInterval(refreshPicks, REFRESH_MS);
  </script>
</body>
</html>
